<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>Shift Plan</title>

<!-- CSRF Tokens -->
<meta name="_csrf" th:content="${_csrf.token}" />
<meta name="_csrf_header" th:content="${_csrf.headerName}" />

<!-- Bootstrap -->
<link rel="stylesheet"
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
<link rel="stylesheet" href="/css/custom-styles.css">
</head>
<body>

	<div class="container mt-4">
		<h2 class="text-center text-primary">Shift Plan</h2>


		
		<div class="d-flex justify-content-end align-items-center gap-2 mb-3">

			
			<a href="/notifications"
				class="btn btn-outline-primary position-relative notification-btn">
				ðŸ”” <span th:if="${unreadNotificationCount > 0}"
				class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger"
				th:text="${unreadNotificationCount}"> </span>
			</a>


			
			<div class="dropdown">
				<button class="btn btn-secondary dropdown-toggle" type="button"
					id="hamburgerMenu" data-bs-toggle="dropdown" aria-expanded="false">
					â˜°</button>
				<ul class="dropdown-menu dropdown-menu-end"
					aria-labelledby="hamburgerMenu">
					<li><a class="dropdown-item" th:href="@{/shiftplan}">Shiftplan</a></li>

					
					<li th:if="${currentUser.name != 'Reze'}"><a
						class="dropdown-item" th:href="@{/notifications}">Notifications</a>
					</li>
					<li th:if="${currentUser.name != 'Reze'}"><a
						class="dropdown-item" th:href="@{/shift-exchange}">Shift
							Exchange</a></li>
					<li th:if="${currentUser.name != 'Reze'}"><a
						class="dropdown-item" th:href="@{/my-shifts}">My Shifts</a></li>

					
					<li th:if="${currentUser.name == 'Reze'}"><hr
							class="dropdown-divider"></li>
					<li th:if="${currentUser.name == 'Reze'}"><a
						class="dropdown-item text-success fw-bold"
						th:href="@{/admin-page}">Admin Page</a></li>
					<li th:if="${currentUser.name == 'Reze'}"><a
						class="dropdown-item text-danger fw-bold"
						th:href="@{/special-controls}">Special Controls</a></li>
				</ul>

			</div>

		</div>

		
		<div class="mobile-fullscreen-table">
			<div class="table-responsive mt-3">
				<table class="table table-bordered table-hover">
					<thead class="table-dark">
						<tr>
							<th>Date</th>
							<th th:each="shiftType : ${orderedShiftTypes}"
								th:text="${{
                        'NIGHT_SHIFT_SF': 'Night SF', 'NIGHT_SHIFT': 'NS', 'NIGHT_SHIFT_PLUS': 'NS+',
                        'MORNING_SF': 'Morning SF', 'MORNING_REZE': 'Reze', 'MORNING_CAFE_1': 'Cafe1', 'MORNING_CAFE_2': 'Cafe2',
                        'TS_1': 'TS 1', 'TS_2': 'TS 2', 'SEPP': 'SEPP',
                        'AFTERNOON_SF': 'Afternoon SF', 'AFTERNOON_REZE': 'Reze', 'AFTERNOON_CAFE': 'Cafe',
                        'AFTERNOON_GASTRO': 'Gastro', 'AS_1': 'AS 1', 'AS_2': 'AS 2', 'EXTRA': 'Extra'
                    }[shiftType.name()] ?: shiftType.name()}">
							</th>
						</tr>
					</thead>
					<tbody>
						<tr th:each="entry : ${shiftsByDate}">
							<td th:text="${entry.key}"></td>
							<td th:each="shiftType : ${orderedShiftTypes}"><span
								class="selectable-cell" th:each="shift : ${entry.value}"
								th:if="${shift.name == shiftType}"
								th:text="${shift.employee != null ? shift.employee.name : '-'}"
								th:attr="data-shift-id=${shift.id}"> </span></td>
						</tr>
					</tbody>
				</table>
			</div>
		</div>

	</div>

	<!-- Scripts -->
	<script src="/js/shiftplan.js"></script>
	<script
		src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

</body>
</html>
